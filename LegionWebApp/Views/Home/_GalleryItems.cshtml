@model IEnumerable<LegionWebApp.Models.GalleryItem>
@using LegionWebApp.Models;
@using Microsoft.AspNetCore.Mvc.Localization
@using System.Globalization
@inject IViewLocalizer T

@foreach (var item in Model)
{
	<div class="feed-post">
		<div class="post-header">
			<img src="~/images/logo.png" class="profile-picture">
			<div class="post-info">
				<div class="username">@T["Legion Foundation"]</div>
				<div class="post-time">@T[item.Date] - @item.Id</div>
			</div>
		</div>
		<div class="post-content">
			@T[@item.Title]
		</div>
		<div class="container post-media" data-hide-media-overlay="@item.MaxDisplay">
			<div class="row row-cols-2 row-cols-sm-4">
				@foreach (var media in item.Media.OrderBy(m => m.DisplayOrder))
				{
					<div class="@media.Col">
						<div class="media-item">
							@if (media is Video video)
							{
								<video class="lazy smallMedia" disablePictureInPicture preload="none" controls controlslist="noplaybackrate nodownload nofullscreen" src="@($"https://cdn.legion-foundation.org/{item.Date + "/" + video.Link}")" @(video.Poster != null ? $"poster=https://cdn.legion-foundation.org/{item.Date + "/thumbnail/" + video.Poster}" : "") type="video/mp4">
								</video>
							}
							else if (media is Image image)
							{
								<img class="lazy smallMedia" src="@($"https://cdn.legion-foundation.org/{item.Date + "/" + image.Link}")" data-src="@($"https://cdn.legion-foundation.org/{item.Date + "/small/" + image.Link}")" />
							}
						</div>
					</div>
				}
			</div>
		</div>
	</div>
}
